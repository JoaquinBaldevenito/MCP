FROM ./mi_modelo_ollama/unsloth.Q4_K_M.gguf

# PAR√ÅMETROS
# repeat_penalty alto rompe el JSON. Mantenlo bajo.
PARAMETER repeat_penalty 1.05
PARAMETER temperature 0.1
PARAMETER num_ctx 8192
PARAMETER top_k 40
PARAMETER top_p 0.9

# STOP TOKENS (Estrictos para Llama 3)
PARAMETER stop "<|start_header_id|>"
PARAMETER stop "<|end_header_id|>"
PARAMETER stop "<|eot_id|>"
PARAMETER stop "<|end_of_text|>"
PARAMETER stop "<|reserved_special_token"

# PLANTILLA (Llama 3 Standard)
TEMPLATE """
{{- if .System }}<|start_header_id|>system<|end_header_id|>
{{ .System }}<|eot_id|>{{- end }}
{{- range .Messages }}
{{- if eq .Role "user" }}<|start_header_id|>user<|end_header_id|>
{{ .Content }}<|eot_id|>{{- end }}
{{- if eq .Role "assistant" }}<|start_header_id|>assistant<|end_header_id|>
{{ .Content }}<|eot_id|>{{- end }}
{{- end }}
<|start_header_id|>assistant<|end_header_id|>
"""